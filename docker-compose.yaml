version: '3.8'

services:
  go2rtc:
    image: alexxit/go2rtc:latest
    restart: unless-stopped
    environment:
      - TZ=Asia/Bangkok
    ports:
      - "3001:1984"
    command:
      - /bin/sh
      - -c
      - |
        mkdir -p /config
        cat > /config/go2rtc.yaml <<'EOF'
        streams:
          sukhumvit:
            - https://go2rtc.bangkokcam.com/api/stream.m3u8?src=sukhumvit
        api:
          listen: ":1984"
        webrtc:
          listen: ":8555"
        EOF
        go2rtc
